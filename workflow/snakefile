# workflow/snakefile

# Project wide configuration
configfile: "config/config.yaml"

# Local rules
localrules:

# Other rules
include: "rules/preprocessing.smk"
include: "rules/annotation.smk"
include: "rules/reconstruction.smk"

# Master rule to produce all the final output files
rule all:
    input:
        # Growth data preprocessing
        "results/preprocessing/growth-data/plate-reader/growth-data.tsv",
        "results/preprocessing/growth-data/summary/growth_easylinear.csv",
        "results/preprocessing/growth-data/summary/growth_binary.csv",
        "results/preprocessing/growth-data/summary/growth_heatmap.png",
        # Annotation using Bakta
        expand("results/annotation/{sample}/{sample}.gff3", sample=list(config["samples"].keys())),
        # Genome-scale metabolic model reconstruction using KEGG
        expand("results/reconstruction/draft/{sample}/{sample}_draft.mat", sample=list(config["samples"].keys())),
        expand("results/reconstruction/relaxed/{sample}/{sample}_relaxed.mat", sample=list(config["samples"].keys())),
        "results/reconstruction/summary/draft_metrics.csv",
        "results/reconstruction/summary/relaxed_metrics.csv",
